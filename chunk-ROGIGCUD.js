import{h as d}from"./chunk-3PFQFA46.js";import{V as a,Vb as r,_ as l,ma as i}from"./chunk-D6KF5352.js";function h(o){return o.startsWith("_")}function p(o){if(o===0)return"0 B";let t=1024,e=["B","KB","MB","GB"],n=Math.floor(Math.log(o)/Math.log(t));return`${parseFloat((o/Math.pow(t,n)).toFixed(1))} ${e[n]}`}function c(o){return o?new Date(o).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}function u(o){let t=new Map;for(let e of o){let n=e.takenAt?e.takenAt.split("T")[0]:"unknown",s=t.get(n)||[];s.push(e),t.set(n,s)}return t}var g=class o{http=l(d);subscription=null;manifest=i(null);isLoading=i(!0);error=i(null);constructor(){this.loadManifest()}ngOnDestroy(){this.subscription?.unsubscribe()}loadManifest(){this.subscription=this.http.get("assets/photos/manifest.json").subscribe({next:t=>{this.manifest.set(t),this.isLoading.set(!1)},error:t=>{this.error.set(t),this.isLoading.set(!1)}})}allPhotos=r(()=>this.manifest()?.photos??[]);heroPhoto=r(()=>{let t=this.allPhotos();return t.find(e=>e.tags.includes("_hero"))??t[0]??null});photos=r(()=>{let t=this.heroPhoto();return this.allPhotos().filter(e=>e.id!==t?.id)});tagIndex=r(()=>this.manifest()?.tagIndex??{});allTags=r(()=>{let t=this.tagIndex();return Object.keys(t).filter(e=>!h(e)).sort()});photosByDate=r(()=>u(this.photos()));getPhotoById(t){return this.allPhotos().find(e=>e.id===t)}getPhotosByTag(t){let e=this.tagIndex()[t]??[],n=new Set(e);return this.photos().filter(s=>n.has(s.id))}getPhotoIndex(t){return this.photos().findIndex(e=>e.id===t)}getAdjacentPhotos(t){let e=this.photos(),n=this.getPhotoIndex(t);return n===-1?{prev:null,next:e[0]??null}:{prev:n>0?e[n-1]:null,next:n<e.length-1?e[n+1]:null}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{h as a,p as b,c,g as d};
