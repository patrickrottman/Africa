import{C as p,n as f,q as w}from"./chunk-3PFQFA46.js";import{A as l,V as a,Va as d,W as c,Xa as h,_ as o,eb as u,g as _,ha as v,j as s,n as g,z as m}from"./chunk-D6KF5352.js";var y=20,Te=(()=>{class i{_ngZone=o(d);_platform=o(f);_renderer=o(h).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new s;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=y){return this._platform.isBrowser?new _(t=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=e>0?this._scrolled.pipe(l(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):g()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let r=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(m(n=>!n||r.indexOf(n)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((r,n)=>{this._scrollableContainsElement(n,e)&&t.push(n)}),t}_scrollableContainsElement(e,t){let r=w(t),n=e.getElementRef().nativeElement;do if(r==n)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var x=20,Fe=(()=>{class i{_platform=o(f);_listeners;_viewportSize;_change=new s;_document=o(v);constructor(){let e=o(d),t=o(h).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=n=>this._change.next(n);this._listeners=[t.listen("window","resize",r),t.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+t,height:r,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),r=e.documentElement,n=r.getBoundingClientRect(),C=-n.top||e.body.scrollTop||t.scrollY||r.scrollTop||0,R=-n.left||e.body.scrollLeft||t.scrollX||r.scrollLeft||0;return{top:C,left:R}}change(e=x){return e>0?this._change.pipe(l(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var S=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=c({})}return i})(),Be=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=c({imports:[p,S,p,S]})}return i})();export{Te as a,Fe as b,S as c,Be as d};
